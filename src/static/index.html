<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PancakeSwap Bot</title>
</head>
<body>
    <h1>PancakeSwap Trading Bot</h1>
    
    <h2>Connection Status</h2>
    <button onclick="checkStatus()">Check BSC Connection</button>
    <div id="statusResult"></div>
    
    <h2>Wallet Balance</h2>
    <button onclick="getBalance()">Get Balance</button>
    <div id="balanceResult"></div>
    
    <h2>Token Swap</h2>
    <div>
        <label for="tokenAddress">Token Address:</label>
        <input type="text" id="tokenAddress" placeholder="0x..." required>
    </div>
    <div>
        <label for="amountBnb">Amount BNB to Swap:</label>
        <input type="number" id="amountBnb" value="0.001" step="0.001" min="0.001" required>
    </div>
    <div>
        <label for="gasPrice">Gas Price (Gwei):</label>
        <input type="number" id="gasPrice" value="5" min="1" required>
    </div>
    <button onclick="swapTokens()">Execute Swap</button>
    <div id="swapLoading"></div>
    <div id="swapResult"></div>
    
    <script>
        async function checkStatus() {
            try {
                const response = await fetch("/api/status");
                const data = await response.json();
                document.getElementById("statusResult").innerText = JSON.stringify(data);
            } catch (error) {
                document.getElementById("statusResult").innerText = "Error: " + error.message;
            }
        }

        async function getBalance() {
            try {
                const response = await fetch("/api/balance");
                const data = await response.json();
                document.getElementById("balanceResult").innerText = JSON.stringify(data);
            } catch (error) {
                document.getElementById("balanceResult").innerText = "Error: " + error.message;
            }
        }

        async function swapTokens() {
            const tokenAddress = document.getElementById("tokenAddress").value;
            const amountBnb = parseFloat(document.getElementById("amountBnb").value);
            const gasPrice = parseInt(document.getElementById("gasPrice").value);
            
            if (!tokenAddress || !amountBnb || !gasPrice) {
                alert("Please fill in all fields");
                return;
            }
            
            document.getElementById("swapLoading").innerText = "Processing transaction...";
            document.getElementById("swapResult").innerText = "";

            try {
                const response = await fetch("/api/swap", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        token_address: tokenAddress,
                        amount_bnb: amountBnb,
                        gas_price_gwei: gasPrice
                    })
                });
                
                const data = await response.json();
                document.getElementById("swapResult").innerText = JSON.stringify(data);
            } catch (error) {
                document.getElementById("swapResult").innerText = "Error: " + error.message;
            } finally {
                document.getElementById("swapLoading").innerText = "";
            }
        }
    </script>
</body>
</html>

